<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cron 表达式生成器</title>
    <link href="https://unpkg.com/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../asset/common.css">
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        .expression-display {
            background-color: #f8f9fa;
            border-radius: 0.375rem;
            padding: 1rem;
            margin-bottom: 1rem;
            font-family: monospace;
            font-size: 1.2rem;
            text-align: center;
        }
        .field-section {
            background-color: #f8f9fa;
            border-radius: 0.375rem;
            padding: 1rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <div id="navbar-container"></div>
    
    <div class="container container-main">
        <!-- 面包屑导航 -->
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item">开发工具</li>
                <li class="breadcrumb-item active" aria-current="page">Cron 表达式生成器</li>
            </ol>
        </nav>
        
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">Cron 表达式生成器</h5>
            </div>
            <div class="card-body">
                <div class="expression-display">
                    <strong>生成的表达式:</strong>
                    <div id="generatedExpression" class="mt-2">* * * * *</div>
                </div>
                
                <div class="field-section">
                    <div class="row">
                        <div class="col-md-2">
                            <label for="genMinute" class="form-label">分钟</label>
                            <select class="form-select" id="genMinute">
                                <option value="*" selected>每分钟</option>
                                <option value="0">0</option>
                                <option value="5">5</option>
                                <option value="10">10</option>
                                <option value="15">15</option>
                                <option value="20">20</option>
                                <option value="25">25</option>
                                <option value="30">30</option>
                                <option value="35">35</option>
                                <option value="40">40</option>
                                <option value="45">45</option>
                                <option value="50">50</option>
                                <option value="55">55</option>
                                <option value="*/5">每5分钟</option>
                                <option value="*/10">每10分钟</option>
                                <option value="*/15">每15分钟</option>
                                <option value="*/30">每30分钟</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <label for="genHour" class="form-label">小时</label>
                            <select class="form-select" id="genHour">
                                <option value="*" selected>每小时</option>
                                <option value="0">0 (午夜)</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12 (中午)</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                                <option value="16">16</option>
                                <option value="17">17</option>
                                <option value="18">18</option>
                                <option value="19">19</option>
                                <option value="20">20</option>
                                <option value="21">21</option>
                                <option value="22">22</option>
                                <option value="23">23</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <label for="genDay" class="form-label">日期</label>
                            <select class="form-select" id="genDay">
                                <option value="*" selected>每日</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                                <option value="16">16</option>
                                <option value="17">17</option>
                                <option value="18">18</option>
                                <option value="19">19</option>
                                <option value="20">20</option>
                                <option value="21">21</option>
                                <option value="22">22</option>
                                <option value="23">23</option>
                                <option value="24">24</option>
                                <option value="25">25</option>
                                <option value="26">26</option>
                                <option value="27">27</option>
                                <option value="28">28</option>
                                <option value="29">29</option>
                                <option value="30">30</option>
                                <option value="31">31</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="genMonth" class="form-label">月份</label>
                            <select class="form-select" id="genMonth">
                                <option value="*" selected>每月</option>
                                <option value="1">1月</option>
                                <option value="2">2月</option>
                                <option value="3">3月</option>
                                <option value="4">4月</option>
                                <option value="5">5月</option>
                                <option value="6">6月</option>
                                <option value="7">7月</option>
                                <option value="8">8月</option>
                                <option value="9">9月</option>
                                <option value="10">10月</option>
                                <option value="11">11月</option>
                                <option value="12">12月</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="genWeekday" class="form-label">星期</label>
                            <select class="form-select" id="genWeekday">
                                <option value="*" selected>每日</option>
                                <option value="0">周日</option>
                                <option value="1">周一</option>
                                <option value="2">周二</option>
                                <option value="3">周三</option>
                                <option value="4">周四</option>
                                <option value="5">周五</option>
                                <option value="6">周六</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="d-flex justify-content-between">
                    <div>
                        <button id="copyBtn" class="btn btn-primary">
                            <i class="bi bi-clipboard me-1"></i>
                            复制表达式
                        </button>
                    </div>
                    <div>
                        <button id="resetBtn" class="btn btn-secondary">
                            <i class="bi bi-arrow-counterclockwise me-1"></i>
                            重置
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 百科内容 -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">关于 Cron 表达式</h5>
            </div>
            <div class="card-body">
                <h6>什么是 Cron 表达式</h6>
                <p>
                    Cron 表达式是一个字符串，用于配置任务的执行时间。它由五个或六个字段组成（本工具使用五字段格式），
                    分别表示分钟、小时、日期、月份和星期几。通过 Cron 表达式可以精确地定义任务的执行计划。
                </p>
                
                <h6>Cron 表达式格式</h6>
                <p>
                    标准格式为：<code>分 时 日 月 周</code>
                </p>
                <ul>
                    <li><strong>分：</strong>0-59</li>
                    <li><strong>时：</strong>0-23</li>
                    <li><strong>日：</strong>1-31</li>
                    <li><strong>月：</strong>1-12 或 JAN-DEC</li>
                    <li><strong>周：</strong>0-7（0 和 7 都表示星期日）或 SUN-SAT</li>
                </ul>
                
                <h6>特殊字符</h6>
                <ul>
                    <li><strong>*：</strong>匹配该字段的所有值</li>
                    <li><strong>?：</strong>不指定值，用于日和周字段的互斥</li>
                    <li><strong>-：</strong>表示范围，如 1-5 表示 1 到 5</li>
                    <li><strong>,：</strong>表示列举，如 1,3,5 表示 1、3、5</li>
                    <li><strong>/：</strong>表示步长，如 0/15 表示从 0 开始每 15 分钟</li>
                    <li><strong>L：</strong>表示最后，如 L 在日字段表示当月最后一天</li>
                    <li><strong>W：</strong>表示工作日，如 15W 表示离 15 号最近的工作日</li>
                    <li><strong>#：</strong>表示第几个星期几，如 6#3 表示第三个星期五</li>
                </ul>
                
                <h6>常用示例</h6>
                <ul>
                    <li><strong>0 0 * * *：</strong>每天午夜执行</li>
                    <li><strong>0 0 1 * *：</strong>每月 1 日午夜执行</li>
                    <li><strong>0 0 1 1 *：</strong>每年 1 月 1 日午夜执行</li>
                    <li><strong>0 0 * * 0：</strong>每周日午夜执行</li>
                    <li><strong>0 */2 * * *：</strong>每隔 2 小时执行</li>
                    <li><strong>0 9-17 * * *：</strong>每天上午 9 点到下午 5 点每小时执行</li>
                </ul>
                
                <h6>如何使用本工具</h6>
                <ol>
                    <li>选择所需的分钟、小时、日期、月份和星期选项</li>
                    <li>生成的表达式会实时显示在顶部</li>
                    <li>点击"复制表达式"按钮将表达式复制到剪贴板</li>
                    <li>点击"重置"按钮恢复默认设置</li>
                </ol>
                
                <h6>注意事项</h6>
                <ul>
                    <li>工具完全在浏览器中运行，不会上传任何数据</li>
                    <li>本工具仅支持标准的五字段 Cron 表达式</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div id="footer-container"></div>

    <script src="https://unpkg.com/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../asset/navbar.js"></script>
    <script src="../../asset/footer.js"></script>
    <script src="../../asset/common.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const genMinute = document.getElementById('genMinute');
            const genHour = document.getElementById('genHour');
            const genDay = document.getElementById('genDay');
            const genMonth = document.getElementById('genMonth');
            const genWeekday = document.getElementById('genWeekday');
            const generatedExpression = document.getElementById('generatedExpression');
            
            // 更新表达式显示
            function updateExpression() {
                const expression = `${genMinute.value} ${genHour.value} ${genDay.value} ${genMonth.value} ${genWeekday.value}`;
                generatedExpression.textContent = expression;
            }
            
            // 为所有选择框添加事件监听器
            [genMinute, genHour, genDay, genMonth, genWeekday].forEach(select => {
                select.addEventListener('change', updateExpression);
            });
            
            // 复制表达式
            document.getElementById('copyBtn').addEventListener('click', async function() {
                try {
                    await navigator.clipboard.writeText(generatedExpression.textContent);
                    showToast('表达式已复制到剪贴板', 'success');
                } catch (err) {
                    showToast('复制失败: ' + err.message, 'error');
                }
            });
            
            // 重置功能
            document.getElementById('resetBtn').addEventListener('click', function() {
                genMinute.value = '*';
                genHour.value = '*';
                genDay.value = '*';
                genMonth.value = '*';
                genWeekday.value = '*';
                updateExpression();
            });
            
            // 初始化表达式显示
            updateExpression();
        });
    </script>
</body>
</html>